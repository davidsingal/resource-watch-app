(function(App) {

  'use strict';

  var FIXTURES = [
    // Simple Bars
    {
      name: 'Total CO2 emissions by year',
      slug: 'total-co2-emissions-by-year',
      verified: true,
      date: '2016-03-30T13:23:08+00:00',
      description: 'This dateset shows the total CO2 emission per country for the years 1990-2011. ',
      source: 'CAIT',
      source_link: 'http://www.wri.org/resources/data-visualizations/cait-climate-data-explorer',
      authors: 'CAIT Climate Data Explorer. 2015. Washington, DC: World Resources Institute. Available online at: http://cait.wri.org.  Please Note: CAIT data are derived from several sources.',
      layer:Â {
        type: 'cartodb',
        name: 'Total CO2 emissions',
        color: '#333333',
        user: 'insights',
        sql: 'SELECT d.the_geom, d.the_geom_webmercator,(total_co2_wout_lucf+lucf) as total, r.iso  FROM cait_2_0_country_ghg_emissions r inner join countries d on iso_a3=iso where year=\'2011\'',
        cartocss: '#table_spec{ polygon-fill: #F7F7F7; polygon-opacity: 0.8; line-color: #FFF; line-width: 0.1; line-opacity: 1;}#table_spec [ total <= 8742.68172] { polygon-fill: #252525;}#table_spec [ total <= 4917.98441] { polygon-fill: #525252;}#table_spec [ total <= 266.70737] { polygon-fill: #737373;}#table_spec [ total <= 150.80814] { polygon-fill: #969696;}#table_spec [ total <= 55.13663] { polygon-fill: #BDBDBD;}#table_spec [ total <= 11.12687] { polygon-fill: #D9D9D9;}#table_spec [ total <= 10.98882] { polygon-fill: #F7F7F7;}"',
        interactivity: 'total',
        active: true,
        zIndex: 0
      },
      data: [{"year":"1990","total":49882},{"year":"1991","total":50439},{"year":"1992","total":53788},{"year":"1993","total":54091},{"year":"1994","total":54430},{"year":"1995","total":55702},{"year":"1996","total":57092},{"year":"1997","total":57529},{"year":"1998","total":57811},{"year":"1999","total":57926},{"year":"2000","total":59692},{"year":"2001","total":61106},{"year":"2002","total":62043},{"year":"2003","total":64553},{"year":"2004","total":66915},{"year":"2005","total":68740},{"year":"2006","total":69965},{"year":"2007","total":71781},{"year":"2008","total":72262},{"year":"2009","total":69906},{"year":"2010","total":73082},{"year":"2011","total":74736}],
      chart: {"padding":{"top":25,"left":45,"bottom":30,"right":20},"width":270,"height":240,"data":[{"name":"table","values":[{"x":"1990","y":49882.21334},{"x":"1991","y":50439.99762},{"x":"1992","y":53788.76345},{"x":"1993","y":54091.51656},{"x":"1994","y":54430.268},{"x":"1995","y":55702.0407},{"x":"1996","y":57092.01688},{"x":"1997","y":57529.63805},{"x":"1998","y":57811.34489},{"x":"1999","y":57926.15725},{"x":"2000","y":59692.20263},{"x":"2001","y":61106.12063},{"x":"2002","y":62043.8042},{"x":"2003","y":64553.98158},{"x":"2004","y":66915.40318},{"x":"2005","y":68740.32298},{"x":"2006","y":69965.1020100001},{"x":"2007","y":71781.30638},{"x":"2008","y":72262.57875},{"x":"2009","y":69906.36943},{"x":"2010","y":73082.2306000001},{"x":"2011","y":74736.86963}],"format":{"parse":{"x":"date"}}},{"name":"summary","source":"table","transform":[{"type":"aggregate","summarize":{"y":["min","max"]}},{"type":"formula","field":"difference","expr":"datum.max_y-datum.min_y"},{"type":"formula","field":"min","expr":"datum.min_y === 0 ? 0 : (datum.difference > 0 ? datum.min_y - datum.difference * 0.2  : datum.min_y * 0.8)"},{"type":"formula","field":"min","expr":"datum.min < 0 ? 0 : datum.min"},{"type":"formula","field":"max","expr":"datum.max_y === 0 ? 10 : (datum.difference > 0 ? datum.max_y + datum.difference * 0.2 : datum.max_y * 1.2)"}]},{"name":"computed","source":"table","transform":[{"type":"cross","with":"summary"}]}],"scales":[{"name":"x","type":"time","range":"width","domain":{"data":"table","field":"x"}},{"name":"y","type":"linear","range":"height","domain":{"data":"computed","field":"a.y"},"domainMin":{"data":"computed","field":"b.min"},"domainMax":{"data":"computed","field":"b.max"},"zero":false,"nice":true}],"axes":[{"name":"lbl","type":"x","scale":"x","ticks":5,"format":"%Y","properties":{"ticks":{"strokeWidth":{"value":0}},"axis":{"stroke":{"value":"#333"},"strokeWidth":{"value":0}},"labels":{"fontSize":{"value":10},"fontWeight":{"value":300},"fill":{"value":"#9BA2AA"},"dx":{"value":5}}}},{"type":"y","ticks":7,"scale":"y","grid":true,"layer":"back","format":"f","properties":{"ticks":{"stroke":{"value":"steelblue"}},"majorTicks":{"strokeWidth":{"value":0}},"axis":{"stroke":{"value":"#333"},"strokeWidth":{"value":0}},"labels":{"fontSize":{"value":10},"fontWeight":{"value":300},"fill":{"value":"#9BA2AA"}}}}],"marks":[{"type":"rect","from":{"data":"table"},"properties":{"enter":{"x":{"scale":"x","field":"x"},"width":{"field":{"group":"width"},"mult":0.03},"y":{"scale":"y","field":"y"},"y2":{"field":{"group":"height"}}},"update":{"fill":{"value":"#5BB1D2"}},"hover":{"fill":{"value":"#c32d7b"}}}},{"type":"text","from":{"data":"table","transform":[{"type":"facet","groupby":["unit"]}]},"properties":{"enter":{"x":{"value":-30},"y":{"value":-15},"text":{"template":"{{datum.unit}}"},"fontSize":{"value":10},"fontWeight":{"value":300},"fill":{"value":"#9BA2AA"},"align":{"value":"left"}}}}]}
    },
    {
      name: 'CO2 emmissions through non-clean energy production',
      slug: 'co2-emmissions-through-non-clean-energy-production',
      verified: true,
      date: '	2016-04-01T13:23:08+00:00',
      description: 'Description',
      source: 'Source',
      source_link: '',
      authors: 'Authors',
      layer:{
        type: 'cartodb',
        name: 'CO2 emmissions',
        color: '#005824',
        user: 'insights',
        sql: 'SELECT * FROM carma_plants',
        cartocss: '#carma_plants{ marker-fill-opacity: 0.9; marker-line-color: #FFF; marker-line-width: 0.11; marker-line-opacity: 1; marker-placement: point; marker-multi-policy: largest; marker-type: ellipse; marker-fill: #FF5C00; marker-allow-overlap: false; marker-clip: false;}#carma_plants [ carbon_future <= 50237000] { marker-width: 25.0; marker-fill: #B81609;}#carma_plants [ carbon_future <= 7805900] { marker-width: 23.3; marker-fill: #D6301D;}#carma_plants [ carbon_future <= 4596100] { marker-width: 21.7; marker-fill: #F84F40;}#carma_plants [ carbon_future <= 1657700] { marker-width: 20.0; marker-fill: #FF6600;}#carma_plants [ carbon_future <= 672400] { marker-width: 18.3; marker-fill: #FF9900;}#carma_plants [ carbon_future <= 68402] { marker-width: 16.7; marker-fill: #055D00;}#carma_plants [ carbon_future <= 9680.2998] { marker-width: 10.0; marker-fill: #136400;}#carma_plants [ carbon_future <= 101] { marker-width: 8; marker-fill: #2fb708;}',
        interactivity: false,
        active: true,
        zIndex: 0
      },
      data: [{"value":5443091644.2356,"name":"China","iso":"CHN","rank":1},{"value":4174537041.901,"name":"India","iso":"IND","rank":2},{"value":2624987466.8871,"name":"United States","iso":"USA","rank":3},{"value":721613036.7644,"name":"Russia","iso":"RUS","rank":4},{"value":466892682.013599,"name":"Japan","iso":"JPN","rank":5},{"value":445112200.118899,"name":"Germany","iso":"DEU","rank":6},{"value":377856513.1902,"name":"Indonesia","iso":"IDN","rank":7},{"value":366155825.5404,"name":"South Korea","iso":"KOR","rank":8},{"value":355186144.4303,"name":"Vietnam","iso":"VNM","rank":9},{"value":297520475.8008,"name":"Saudi Arabia","iso":"SAU","rank":10},{"value":292764805.8507,"name":"South Africa","iso":"ZAF","rank":11},{"value":269121004.9394,"name":"Australia","iso":"AUS","rank":12},{"value":252743763.6901,"name":"United Kingdom","iso":"GBR","rank":13},{"value":246930833.2314,"name":"Turkey","iso":"TUR","rank":14},{"value":242373975.3291,"name":"Taiwan","iso":"TWN","rank":15},{"value":234243057.2038,"name":"Poland","iso":"POL","rank":16},{"value":186046495.2003,"name":"Iran","iso":"IRN","rank":17},{"value":162213763.9885,"name":"Italy","iso":"ITA","rank":18},{"value":161839739.6624,"name":"Mexico","iso":"MEX","rank":19},{"value":136381015.8892,"name":"Thailand","iso":"THA","rank":20},{"value":119246037.1574,"name":"Spain","iso":"ESP","rank":21},{"value":118456933.4198,"name":"Egypt","iso":"EGY","rank":22},{"value":109677789.2368,"name":"Canada","iso":"CAN","rank":23},{"value":103521367.1404,"name":"Kazakhstan","iso":"KAZ","rank":24},{"value":95281806.0641,"name":"United Arab Emirates","iso":"ARE","rank":25},{"value":94875162.1323,"name":"Malaysia","iso":"MYS","rank":26},{"value":90948240.4058,"name":"Netherlands","iso":"NLD","rank":27},{"value":83264597.0295,"name":"Chile","iso":"CHL","rank":28},{"value":83210172.9995,"name":"Ukraine","iso":"UKR","rank":29},{"value":80603728.9157,"name":"Greece","iso":"GRC","rank":30},{"value":79288836.9,"name":"Iraq","iso":"IRQ","rank":31},{"value":76291461.8492,"name":"Pakistan","iso":"PAK","rank":32},{"value":73671323.4694,"name":"Bangladesh","iso":"BGD","rank":33},{"value":73462009.2497,"name":"Czech Republic","iso":"CZE","rank":34},{"value":73013650.1903,"name":"Brazil","iso":"BRA","rank":35},{"value":70392643.3212,"name":"Philippines","iso":"PHL","rank":36},{"value":66839769.9002,"name":"Kuwait","iso":"KWT","rank":37},{"value":60110176.2139,"name":"France","iso":"FRA","rank":38},{"value":57951858.2104,"name":"Israel","iso":"ISR","rank":39},{"value":53671740.895,"name":"Argentina","iso":"ARG","rank":40},{"value":46564331.7753,"name":"Romania","iso":"ROU","rank":41},{"value":44652766.71,"name":"Libya","iso":"LBY","rank":42},{"value":42571979.22,"name":"Serbia","iso":"SRB","rank":43},{"value":42263666.2376,"name":"Bulgaria","iso":"BGR","rank":44},{"value":41860596.5002,"name":"Bosnia and Herzegovina","iso":"BIH","rank":45},{"value":40203809.9599,"name":"Venezuela","iso":"VEN","rank":46},{"value":38409400,"name":"Uzbekistan","iso":"UZB","rank":47},{"value":37253238.42,"name":"Nigeria","iso":"NGA","rank":48},{"value":35764093.1599,"name":"Singapore","iso":"SGP","rank":49},{"value":32080244.4325,"name":"Belgium","iso":"BEL","rank":50},{"value":31960421.399,"name":"Algeria","iso":"DZA","rank":51},{"value":31413380.2005,"name":"Belarus","iso":"BLR","rank":52},{"value":29405652.6465,"name":"Hong Kong (China)","iso":"HKG","rank":53},{"value":28101177.9392,"name":"Morocco","iso":"MAR","rank":54},{"value":26651280.4997,"name":"Dominican Republic","iso":"DOM","rank":55},{"value":24854506.8172,"name":"Portugal","iso":"PRT","rank":56},{"value":24808144.0997,"name":"Syria","iso":"SYR","rank":57},{"value":23562601.8389,"name":"Finland","iso":"FIN","rank":58},{"value":22295846,"name":"Qatar","iso":"QAT","rank":59},{"value":21830711.4595,"name":"Peru","iso":"PER","rank":60},{"value":21703242.8,"name":"Zimbabwe","iso":"ZWE","rank":61},{"value":19863776.1809,"name":"Hungary","iso":"HUN","rank":62},{"value":18249396,"name":"Tunisia","iso":"TUN","rank":63},{"value":17799803.1002,"name":"Sri Lanka","iso":"LKA","rank":64},{"value":17526223.4001,"name":"Jordan","iso":"JOR","rank":65},{"value":17087859.4783,"name":"Austria","iso":"AUT","rank":66},{"value":16592592.5794,"name":"Oman","iso":"OMN","rank":67},{"value":16219567,"name":"Turkmenistan","iso":"TKM","rank":68},{"value":15661228.1001,"name":"Puerto Rico","iso":"PRI","rank":69},{"value":15495751.6899,"name":"Ireland","iso":"IRL","rank":70},{"value":15383614.97,"name":"Denmark","iso":"DNK","rank":71},{"value":13969304.7002,"name":"North Korea","iso":"PRK","rank":72},{"value":13943873.97,"name":"Azerbaijan","iso":"AZE","rank":73},{"value":13884952.2003,"name":"Cuba","iso":"CUB","rank":74},{"value":13032523.432,"name":"Kosovo","iso":"XKX","rank":75},{"value":12808853.6282,"name":"Laos","iso":"LAO","rank":76},{"value":12772514.6175,"name":"Mongolia","iso":"MNG","rank":77},{"value":11242911.5219,"name":"Colombia","iso":"COL","rank":78},{"value":10452169.4599,"name":"Estonia","iso":"EST","rank":79},{"value":10292980.5004,"name":"Slovak Republic","iso":"SVK","rank":80},{"value":10201516.41,"name":"Cambodia","iso":"KHM","rank":81},{"value":10100608.8999,"name":"Lebanon","iso":"LBN","rank":82},{"value":10002149,"name":"Trinidad and Tobago","iso":"TTO","rank":83},{"value":9649673.782,"name":"Macedonia","iso":"MKD","rank":84},{"value":9553153.6212,"name":"Slovenia","iso":"SVN","rank":85},{"value":9092735.9202,"name":"Croatia","iso":"HRV","rank":86},{"value":8481421,"name":"Bahrain","iso":"BHR","rank":87},{"value":8450652.1684,"name":"Swaziland","iso":"SWZ","rank":88},{"value":8377051.9902,"name":"Kenya","iso":"KEN","rank":89},{"value":8086380,"name":"Botswana","iso":"BWA","rank":90},{"value":7852886.123,"name":"Tanzania","iso":"TZA","rank":91},{"value":7552322.8999,"name":"Guatemala","iso":"GTM","rank":92},{"value":7185067.0603,"name":"Albania","iso":"ALB","rank":93},{"value":7048282.6749,"name":"New Zealand","iso":"NZL","rank":94},{"value":6806949.0236,"name":"Ecuador","iso":"ECU","rank":95},{"value":6042274.6001,"name":"Yemen","iso":"YEM","rank":96},{"value":5428866.2401,"name":"Ghana","iso":"GHA","rank":97},{"value":5408974.5713,"name":"Sudan","iso":"SDN","rank":98},{"value":5087755.6001,"name":"Jamaica","iso":"JAM","rank":99},{"value":4938076.7993,"name":"Cyprus","iso":"CYP","rank":100},{"value":4672674.5555,"name":"Panama","iso":"PAN","rank":101},{"value":4314159.8996,"name":"Bolivia","iso":"BOL","rank":102},{"value":3949650.4402,"name":"Cote d'Ivoire","iso":"CIV","rank":103},{"value":3921995.2998,"name":"Uruguay","iso":"URY","rank":104},{"value":3734228.507,"name":"Sweden","iso":"SWE","rank":105},{"value":3729311.7002,"name":"Brunei Darussalam","iso":"BRN","rank":106},{"value":3700715,"name":"Cameroon","iso":"CMR","rank":107},{"value":3694453.2002,"name":"El Salvador","iso":"SLV","rank":108},{"value":3341880,"name":"Moldova","iso":"MDA","rank":109},{"value":2760072.8999,"name":"Malta","iso":"MLT","rank":110},{"value":2467371.2479,"name":"Norway","iso":"NOR","rank":111},{"value":2297755.5502,"name":"Nicaragua","iso":"NIC","rank":112},{"value":2255793.0798,"name":"Honduras","iso":"HND","rank":113},{"value":2249753.0962,"name":"Senegal","iso":"SEN","rank":114},{"value":2247912.366,"name":"New Caledonia","iso":"NCL","rank":115},{"value":2224861.8405,"name":"Latvia","iso":"LVA","rank":116},{"value":2199919.7804,"name":"Bahamas, The","iso":"BHS","rank":117},{"value":2067710.7062,"name":"Lithuania","iso":"LTU","rank":118},{"value":2058679.7998,"name":"Mauritius","iso":"MUS","rank":119},{"value":1769451.7152,"name":"Papua New Guinea","iso":"PNG","rank":120},{"value":1738396.5801,"name":"Angola","iso":"AGO","rank":121},{"value":1676530,"name":"Montenegro","iso":"MNE","rank":122},{"value":1673974.1599,"name":"Namibia","iso":"NAM","rank":123},{"value":1523946.04,"name":"Reunion","iso":"REU","rank":124},{"value":1441283,"name":"Congo, Rep.","iso":"COG","rank":125},{"value":1407737.2698,"name":"Myanmar","iso":"MMR","rank":126},{"value":1213322.9001,"name":"Guam","iso":"GUM","rank":127},{"value":1193928.5501,"name":"Guinea","iso":"GIN","rank":128},{"value":1154563.0298,"name":"Luxembourg","iso":"LUX","rank":129},{"value":1132041.61,"name":"Uganda","iso":"UGA","rank":130},{"value":1041619,"name":"Barbados","iso":"BRB","rank":131},{"value":997780.7998,"name":"Macau (China)","iso":"MAC","rank":132},{"value":973396,"name":"Kyrgyz Republic","iso":"KGZ","rank":133},{"value":949063,"name":"Martinique","iso":"MTQ","rank":134},{"value":901647.9436,"name":"Madagascar","iso":"MDG","rank":135},{"value":854064.7337,"name":"Switzerland","iso":"CHE","rank":136},{"value":828442.9369,"name":"Mauritania","iso":"MRT","rank":137},{"value":753061.7008,"name":"Guyana","iso":"GUY","rank":138},{"value":728000.3,"name":"Costa Rica","iso":"CRI","rank":139},{"value":714869.4208,"name":"Palestine","iso":"PSE","rank":140},{"value":709716.12,"name":"Armenia","iso":"ARM","rank":141},{"value":687764.48,"name":"Georgia","iso":"GEO","rank":142},{"value":644908.0122,"name":"French Guiana","iso":"GUF","rank":143},{"value":629587,"name":"Bermuda","iso":"BMU","rank":144},{"value":589906.0802,"name":"Afghanistan","iso":"AFG","rank":145},{"value":548151.7998,"name":"Cayman Islands","iso":"CYM","rank":146},{"value":506193.2246,"name":"Suriname","iso":"SUR","rank":147},{"value":494251.3657,"name":"Zambia","iso":"ZMB","rank":148},{"value":479649,"name":"Aruba","iso":"ABW","rank":149},{"value":471825.708,"name":"Burkina Faso","iso":"BFA","rank":150},{"value":462584.5003,"name":"Haiti","iso":"HTI","rank":151},{"value":454222.0593,"name":"Ethiopia","iso":"ETH","rank":152},{"value":448700,"name":"Tajikistan","iso":"TJK","rank":153},{"value":389084.2998,"name":"Saint Lucia","iso":"LCA","rank":154},{"value":375798.4427,"name":"Maldives","iso":"MDV","rank":155},{"value":363973.7692,"name":"Cape Verde","iso":"CPV","rank":156},{"value":355291.9504,"name":"French Polynesia","iso":"PYF","rank":157},{"value":354084.332,"name":"Mozambique","iso":"MOZ","rank":158},{"value":329053.4801,"name":"Gabon","iso":"GAB","rank":159},{"value":308745.7998,"name":"Djibouti","iso":"DJI","rank":160},{"value":304570.278,"name":"Gibraltar","iso":"GIB","rank":161},{"value":292055.2,"name":"Greenland","iso":"GRL","rank":162},{"value":256717,"name":"Equatorial Guinea","iso":"GNQ","rank":163},{"value":243351.2998,"name":"Liberia","iso":"LBR","rank":164},{"value":232129.1002,"name":"Turks and Caicos Islands","iso":"TCA","rank":165},{"value":206719.9908,"name":"Benin","iso":"BEN","rank":166},{"value":199996.3798,"name":"Eritrea","iso":"ERI","rank":167},{"value":199742.6897,"name":"Niger","iso":"NER","rank":168},{"value":191622.5808,"name":"Fiji","iso":"FJI","rank":169},{"value":186393.6004,"name":"Rwanda","iso":"RWA","rank":170},{"value":180119.0001,"name":"American Samoa","iso":"ASM","rank":171},{"value":169289.3699,"name":"Malawi","iso":"MWI","rank":172},{"value":166164.42,"name":"Gambia, The","iso":"GMB","rank":173},{"value":156820,"name":"Seychelles","iso":"SYC","rank":174},{"value":149268.8,"name":"Antigua and Barbuda","iso":"ATG","rank":175},{"value":146246.5199,"name":"Mali","iso":"MLI","rank":176},{"value":139016.3201,"name":"Samoa","iso":"WSM","rank":177},{"value":138366.1,"name":"Grenada","iso":"GRD","rank":178},{"value":123576.7,"name":"Saint Kitts and Nevis","iso":"KNA","rank":179},{"value":94404.5701,"name":"Solomon Islands","iso":"SLB","rank":180},{"value":83849.475,"name":"Chad","iso":"TCD","rank":181},{"value":73450.33,"name":"Saint Vincent and the Grenadines","iso":"VCT","rank":182},{"value":69366,"name":"Dominica","iso":"DMA","rank":183},{"value":68859.2402,"name":"Western Sahara","iso":"ESH","rank":184},{"value":61433.0001,"name":"Vanuatu","iso":"VUT","rank":185},{"value":50513.5926,"name":"Belize","iso":"BLZ","rank":186},{"value":48676.5,"name":"Guinea-Bissau","iso":"GNB","rank":187},{"value":46531.6648,"name":"Sierra Leone","iso":"SLE","rank":188},{"value":43478.776,"name":"Comoros","iso":"COM","rank":189},{"value":38632.7002,"name":"Saint Pierre and Miquelon","iso":"SPM","rank":190},{"value":36378.2701,"name":"British Virgin Islands","iso":"VGB","rank":191},{"value":36176.7102,"name":"Sao Tome and Principe","iso":"STP","rank":192},{"value":35315.89,"name":"Togo","iso":"TGO","rank":193},{"value":30839.82,"name":"Tonga","iso":"TON","rank":194},{"value":29010.602,"name":"Cook Islands","iso":"COK","rank":195},{"value":26662.3633,"name":"Congo, Dem. Rep.","iso":"COD","rank":196},{"value":24886.237,"name":"Central African Republic","iso":"CAF","rank":197},{"value":23071.8604,"name":"Somalia","iso":"SOM","rank":198},{"value":18429,"name":"Nauru","iso":"NRU","rank":199},{"value":17286.5,"name":"Kiribati","iso":"KIR","rank":200},{"value":15942.8999,"name":"Falkland Islands","iso":"FLK","rank":201},{"value":13624.1001,"name":"Montserrat","iso":"MSR","rank":202},{"value":9040.9141,"name":"Nepal","iso":"NPL","rank":203},{"value":6997.0899,"name":"Saint Helena","iso":"SHN","rank":204},{"value":4120.7998,"name":"Burundi","iso":"BDI","rank":205},{"value":2792.18,"name":"Iceland","iso":"ISL","rank":206},{"value":2411.8,"name":"Niue","iso":"NIU","rank":207},{"value":105.8859,"name":"Bhutan","iso":"BTN","rank":208},{"value":0,"name":"Lesotho","iso":"LSO","rank":209},{"value":0,"name":"Antarctica","iso":"ATA","rank":210},{"value":0,"name":"Timor-Leste","iso":"TLS","rank":211},{"value":0,"name":"Paraguay","iso":"PRY","rank":212}],
      chart: {"padding":{"top":40,"left":20,"bottom":0,"right":20},"data":[{"name":"table","values":[{"value":5443091644.2356,"name":"China","iso":"CHN","rank":1},{"value":4174537041.901,"name":"India","iso":"IND","rank":2},{"value":2624987466.8871,"name":"United States","iso":"USA","rank":3},{"value":721613036.7644,"name":"Russia","iso":"RUS","rank":4},{"value":466892682.013599,"name":"Japan","iso":"JPN","rank":5},{"value":445112200.118899,"name":"Germany","iso":"DEU","rank":6},{"value":377856513.1902,"name":"Indonesia","iso":"IDN","rank":7},{"value":366155825.5404,"name":"South Korea","iso":"KOR","rank":8},{"value":355186144.4303,"name":"Vietnam","iso":"VNM","rank":9},{"value":297520475.8008,"name":"Saudi Arabia","iso":"SAU","rank":10},{"value":292764805.8507,"name":"South Africa","iso":"ZAF","rank":11},{"value":269121004.9394,"name":"Australia","iso":"AUS","rank":12},{"value":252743763.6901,"name":"United Kingdom","iso":"GBR","rank":13},{"value":246930833.2314,"name":"Turkey","iso":"TUR","rank":14},{"value":242373975.3291,"name":"Taiwan","iso":"TWN","rank":15},{"value":234243057.2038,"name":"Poland","iso":"POL","rank":16},{"value":186046495.2003,"name":"Iran","iso":"IRN","rank":17},{"value":162213763.9885,"name":"Italy","iso":"ITA","rank":18},{"value":161839739.6624,"name":"Mexico","iso":"MEX","rank":19},{"value":136381015.8892,"name":"Thailand","iso":"THA","rank":20},{"value":119246037.1574,"name":"Spain","iso":"ESP","rank":21},{"value":118456933.4198,"name":"Egypt","iso":"EGY","rank":22},{"value":109677789.2368,"name":"Canada","iso":"CAN","rank":23},{"value":103521367.1404,"name":"Kazakhstan","iso":"KAZ","rank":24},{"value":95281806.0641,"name":"United Arab Emirates","iso":"ARE","rank":25},{"value":94875162.1323,"name":"Malaysia","iso":"MYS","rank":26},{"value":90948240.4058,"name":"Netherlands","iso":"NLD","rank":27},{"value":83264597.0295,"name":"Chile","iso":"CHL","rank":28},{"value":83210172.9995,"name":"Ukraine","iso":"UKR","rank":29},{"value":80603728.9157,"name":"Greece","iso":"GRC","rank":30},{"value":79288836.9,"name":"Iraq","iso":"IRQ","rank":31},{"value":76291461.8492,"name":"Pakistan","iso":"PAK","rank":32},{"value":73671323.4694,"name":"Bangladesh","iso":"BGD","rank":33},{"value":73462009.2497,"name":"Czech Republic","iso":"CZE","rank":34},{"value":73013650.1903,"name":"Brazil","iso":"BRA","rank":35},{"value":70392643.3212,"name":"Philippines","iso":"PHL","rank":36},{"value":66839769.9002,"name":"Kuwait","iso":"KWT","rank":37},{"value":60110176.2139,"name":"France","iso":"FRA","rank":38},{"value":57951858.2104,"name":"Israel","iso":"ISR","rank":39},{"value":53671740.895,"name":"Argentina","iso":"ARG","rank":40},{"value":46564331.7753,"name":"Romania","iso":"ROU","rank":41},{"value":44652766.71,"name":"Libya","iso":"LBY","rank":42},{"value":42571979.22,"name":"Serbia","iso":"SRB","rank":43},{"value":42263666.2376,"name":"Bulgaria","iso":"BGR","rank":44},{"value":41860596.5002,"name":"Bosnia and Herzegovina","iso":"BIH","rank":45},{"value":40203809.9599,"name":"Venezuela","iso":"VEN","rank":46},{"value":38409400,"name":"Uzbekistan","iso":"UZB","rank":47},{"value":37253238.42,"name":"Nigeria","iso":"NGA","rank":48},{"value":35764093.1599,"name":"Singapore","iso":"SGP","rank":49},{"value":32080244.4325,"name":"Belgium","iso":"BEL","rank":50},{"value":31960421.399,"name":"Algeria","iso":"DZA","rank":51},{"value":31413380.2005,"name":"Belarus","iso":"BLR","rank":52},{"value":29405652.6465,"name":"Hong Kong (China)","iso":"HKG","rank":53},{"value":28101177.9392,"name":"Morocco","iso":"MAR","rank":54},{"value":26651280.4997,"name":"Dominican Republic","iso":"DOM","rank":55},{"value":24854506.8172,"name":"Portugal","iso":"PRT","rank":56},{"value":24808144.0997,"name":"Syria","iso":"SYR","rank":57},{"value":23562601.8389,"name":"Finland","iso":"FIN","rank":58},{"value":22295846,"name":"Qatar","iso":"QAT","rank":59},{"value":21830711.4595,"name":"Peru","iso":"PER","rank":60},{"value":21703242.8,"name":"Zimbabwe","iso":"ZWE","rank":61},{"value":19863776.1809,"name":"Hungary","iso":"HUN","rank":62},{"value":18249396,"name":"Tunisia","iso":"TUN","rank":63},{"value":17799803.1002,"name":"Sri Lanka","iso":"LKA","rank":64},{"value":17526223.4001,"name":"Jordan","iso":"JOR","rank":65},{"value":17087859.4783,"name":"Austria","iso":"AUT","rank":66},{"value":16592592.5794,"name":"Oman","iso":"OMN","rank":67},{"value":16219567,"name":"Turkmenistan","iso":"TKM","rank":68},{"value":15661228.1001,"name":"Puerto Rico","iso":"PRI","rank":69},{"value":15495751.6899,"name":"Ireland","iso":"IRL","rank":70},{"value":15383614.97,"name":"Denmark","iso":"DNK","rank":71},{"value":13969304.7002,"name":"North Korea","iso":"PRK","rank":72},{"value":13943873.97,"name":"Azerbaijan","iso":"AZE","rank":73},{"value":13884952.2003,"name":"Cuba","iso":"CUB","rank":74},{"value":13032523.432,"name":"Kosovo","iso":"XKX","rank":75},{"value":12808853.6282,"name":"Laos","iso":"LAO","rank":76},{"value":12772514.6175,"name":"Mongolia","iso":"MNG","rank":77},{"value":11242911.5219,"name":"Colombia","iso":"COL","rank":78},{"value":10452169.4599,"name":"Estonia","iso":"EST","rank":79},{"value":10292980.5004,"name":"Slovak Republic","iso":"SVK","rank":80},{"value":10201516.41,"name":"Cambodia","iso":"KHM","rank":81},{"value":10100608.8999,"name":"Lebanon","iso":"LBN","rank":82},{"value":10002149,"name":"Trinidad and Tobago","iso":"TTO","rank":83},{"value":9649673.782,"name":"Macedonia","iso":"MKD","rank":84},{"value":9553153.6212,"name":"Slovenia","iso":"SVN","rank":85},{"value":9092735.9202,"name":"Croatia","iso":"HRV","rank":86},{"value":8481421,"name":"Bahrain","iso":"BHR","rank":87},{"value":8450652.1684,"name":"Swaziland","iso":"SWZ","rank":88},{"value":8377051.9902,"name":"Kenya","iso":"KEN","rank":89},{"value":8086380,"name":"Botswana","iso":"BWA","rank":90},{"value":7852886.123,"name":"Tanzania","iso":"TZA","rank":91},{"value":7552322.8999,"name":"Guatemala","iso":"GTM","rank":92},{"value":7185067.0603,"name":"Albania","iso":"ALB","rank":93},{"value":7048282.6749,"name":"New Zealand","iso":"NZL","rank":94},{"value":6806949.0236,"name":"Ecuador","iso":"ECU","rank":95},{"value":6042274.6001,"name":"Yemen","iso":"YEM","rank":96},{"value":5428866.2401,"name":"Ghana","iso":"GHA","rank":97},{"value":5408974.5713,"name":"Sudan","iso":"SDN","rank":98},{"value":5087755.6001,"name":"Jamaica","iso":"JAM","rank":99},{"value":4938076.7993,"name":"Cyprus","iso":"CYP","rank":100},{"value":4672674.5555,"name":"Panama","iso":"PAN","rank":101},{"value":4314159.8996,"name":"Bolivia","iso":"BOL","rank":102},{"value":3949650.4402,"name":"Cote d'Ivoire","iso":"CIV","rank":103},{"value":3921995.2998,"name":"Uruguay","iso":"URY","rank":104},{"value":3734228.507,"name":"Sweden","iso":"SWE","rank":105},{"value":3729311.7002,"name":"Brunei Darussalam","iso":"BRN","rank":106},{"value":3700715,"name":"Cameroon","iso":"CMR","rank":107},{"value":3694453.2002,"name":"El Salvador","iso":"SLV","rank":108},{"value":3341880,"name":"Moldova","iso":"MDA","rank":109},{"value":2760072.8999,"name":"Malta","iso":"MLT","rank":110},{"value":2467371.2479,"name":"Norway","iso":"NOR","rank":111},{"value":2297755.5502,"name":"Nicaragua","iso":"NIC","rank":112},{"value":2255793.0798,"name":"Honduras","iso":"HND","rank":113},{"value":2249753.0962,"name":"Senegal","iso":"SEN","rank":114},{"value":2247912.366,"name":"New Caledonia","iso":"NCL","rank":115},{"value":2224861.8405,"name":"Latvia","iso":"LVA","rank":116},{"value":2199919.7804,"name":"Bahamas, The","iso":"BHS","rank":117},{"value":2067710.7062,"name":"Lithuania","iso":"LTU","rank":118},{"value":2058679.7998,"name":"Mauritius","iso":"MUS","rank":119},{"value":1769451.7152,"name":"Papua New Guinea","iso":"PNG","rank":120},{"value":1738396.5801,"name":"Angola","iso":"AGO","rank":121},{"value":1676530,"name":"Montenegro","iso":"MNE","rank":122},{"value":1673974.1599,"name":"Namibia","iso":"NAM","rank":123},{"value":1523946.04,"name":"Reunion","iso":"REU","rank":124},{"value":1441283,"name":"Congo, Rep.","iso":"COG","rank":125},{"value":1407737.2698,"name":"Myanmar","iso":"MMR","rank":126},{"value":1213322.9001,"name":"Guam","iso":"GUM","rank":127},{"value":1193928.5501,"name":"Guinea","iso":"GIN","rank":128},{"value":1154563.0298,"name":"Luxembourg","iso":"LUX","rank":129},{"value":1132041.61,"name":"Uganda","iso":"UGA","rank":130},{"value":1041619,"name":"Barbados","iso":"BRB","rank":131},{"value":997780.7998,"name":"Macau (China)","iso":"MAC","rank":132},{"value":973396,"name":"Kyrgyz Republic","iso":"KGZ","rank":133},{"value":949063,"name":"Martinique","iso":"MTQ","rank":134},{"value":901647.9436,"name":"Madagascar","iso":"MDG","rank":135},{"value":854064.7337,"name":"Switzerland","iso":"CHE","rank":136},{"value":828442.9369,"name":"Mauritania","iso":"MRT","rank":137},{"value":753061.7008,"name":"Guyana","iso":"GUY","rank":138},{"value":728000.3,"name":"Costa Rica","iso":"CRI","rank":139},{"value":714869.4208,"name":"Palestine","iso":"PSE","rank":140},{"value":709716.12,"name":"Armenia","iso":"ARM","rank":141},{"value":687764.48,"name":"Georgia","iso":"GEO","rank":142},{"value":644908.0122,"name":"French Guiana","iso":"GUF","rank":143},{"value":629587,"name":"Bermuda","iso":"BMU","rank":144},{"value":589906.0802,"name":"Afghanistan","iso":"AFG","rank":145},{"value":548151.7998,"name":"Cayman Islands","iso":"CYM","rank":146},{"value":506193.2246,"name":"Suriname","iso":"SUR","rank":147},{"value":494251.3657,"name":"Zambia","iso":"ZMB","rank":148},{"value":479649,"name":"Aruba","iso":"ABW","rank":149},{"value":471825.708,"name":"Burkina Faso","iso":"BFA","rank":150},{"value":462584.5003,"name":"Haiti","iso":"HTI","rank":151},{"value":454222.0593,"name":"Ethiopia","iso":"ETH","rank":152},{"value":448700,"name":"Tajikistan","iso":"TJK","rank":153},{"value":389084.2998,"name":"Saint Lucia","iso":"LCA","rank":154},{"value":375798.4427,"name":"Maldives","iso":"MDV","rank":155},{"value":363973.7692,"name":"Cape Verde","iso":"CPV","rank":156},{"value":355291.9504,"name":"French Polynesia","iso":"PYF","rank":157},{"value":354084.332,"name":"Mozambique","iso":"MOZ","rank":158},{"value":329053.4801,"name":"Gabon","iso":"GAB","rank":159},{"value":308745.7998,"name":"Djibouti","iso":"DJI","rank":160},{"value":304570.278,"name":"Gibraltar","iso":"GIB","rank":161},{"value":292055.2,"name":"Greenland","iso":"GRL","rank":162},{"value":256717,"name":"Equatorial Guinea","iso":"GNQ","rank":163},{"value":243351.2998,"name":"Liberia","iso":"LBR","rank":164},{"value":232129.1002,"name":"Turks and Caicos Islands","iso":"TCA","rank":165},{"value":206719.9908,"name":"Benin","iso":"BEN","rank":166},{"value":199996.3798,"name":"Eritrea","iso":"ERI","rank":167},{"value":199742.6897,"name":"Niger","iso":"NER","rank":168},{"value":191622.5808,"name":"Fiji","iso":"FJI","rank":169},{"value":186393.6004,"name":"Rwanda","iso":"RWA","rank":170},{"value":180119.0001,"name":"American Samoa","iso":"ASM","rank":171},{"value":169289.3699,"name":"Malawi","iso":"MWI","rank":172},{"value":166164.42,"name":"Gambia, The","iso":"GMB","rank":173},{"value":156820,"name":"Seychelles","iso":"SYC","rank":174},{"value":149268.8,"name":"Antigua and Barbuda","iso":"ATG","rank":175},{"value":146246.5199,"name":"Mali","iso":"MLI","rank":176},{"value":139016.3201,"name":"Samoa","iso":"WSM","rank":177},{"value":138366.1,"name":"Grenada","iso":"GRD","rank":178},{"value":123576.7,"name":"Saint Kitts and Nevis","iso":"KNA","rank":179},{"value":94404.5701,"name":"Solomon Islands","iso":"SLB","rank":180},{"value":83849.475,"name":"Chad","iso":"TCD","rank":181},{"value":73450.33,"name":"Saint Vincent and the Grenadines","iso":"VCT","rank":182},{"value":69366,"name":"Dominica","iso":"DMA","rank":183},{"value":68859.2402,"name":"Western Sahara","iso":"ESH","rank":184},{"value":61433.0001,"name":"Vanuatu","iso":"VUT","rank":185},{"value":50513.5926,"name":"Belize","iso":"BLZ","rank":186},{"value":48676.5,"name":"Guinea-Bissau","iso":"GNB","rank":187},{"value":46531.6648,"name":"Sierra Leone","iso":"SLE","rank":188},{"value":43478.776,"name":"Comoros","iso":"COM","rank":189},{"value":38632.7002,"name":"Saint Pierre and Miquelon","iso":"SPM","rank":190},{"value":36378.2701,"name":"British Virgin Islands","iso":"VGB","rank":191},{"value":36176.7102,"name":"Sao Tome and Principe","iso":"STP","rank":192},{"value":35315.89,"name":"Togo","iso":"TGO","rank":193},{"value":30839.82,"name":"Tonga","iso":"TON","rank":194},{"value":29010.602,"name":"Cook Islands","iso":"COK","rank":195},{"value":26662.3633,"name":"Congo, Dem. Rep.","iso":"COD","rank":196},{"value":24886.237,"name":"Central African Republic","iso":"CAF","rank":197},{"value":23071.8604,"name":"Somalia","iso":"SOM","rank":198},{"value":18429,"name":"Nauru","iso":"NRU","rank":199},{"value":17286.5,"name":"Kiribati","iso":"KIR","rank":200},{"value":15942.8999,"name":"Falkland Islands","iso":"FLK","rank":201},{"value":13624.1001,"name":"Montserrat","iso":"MSR","rank":202},{"value":9040.9141,"name":"Nepal","iso":"NPL","rank":203},{"value":6997.0899,"name":"Saint Helena","iso":"SHN","rank":204},{"value":4120.7998,"name":"Burundi","iso":"BDI","rank":205},{"value":2792.18,"name":"Iceland","iso":"ISL","rank":206},{"value":2411.8,"name":"Niue","iso":"NIU","rank":207},{"value":105.8859,"name":"Bhutan","iso":"BTN","rank":208},{"value":0,"name":"Lesotho","iso":"LSO","rank":209},{"value":0,"name":"Antarctica","iso":"ATA","rank":210},{"value":0,"name":"Timor-Leste","iso":"TLS","rank":211},{"value":0,"name":"Paraguay","iso":"PRY","rank":212}],"transform":[{"type":"sort","by":"rank"}]},{"name":"current","source":"table","transform":[{"type":"filter","test":"datum.iso === 'CHN'"},{"type":"formula","field":"current_rank","expr":"datum.rank"}]},{"name":"max","source":"table","transform":[{"type":"aggregate","summarize":{"rank":["max"]}}]},{"name":"head","source":"table","transform":[{"type":"cross","with":"current"},{"type":"filter","test":"datum.b.current_rank <= 5 ? datum.a.rank <= 5 : datum.a.rank === 1"},{"type":"formula","field":"color","expr":"datum.a.rank === datum.b.current_rank ? '#5BB1D2' : '#9aa2a9'"},{"type":"formula","field":"weight","expr":"datum.a.rank === datum.b.current_rank ? '500' : '300'"}]},{"name":"head_count","source":"head","transform":[{"type":"aggregate","summarize":{"*":"count"}}]},{"name":"center","source":"table","transform":[{"type":"cross","with":"current"},{"type":"cross","with":"max"},{"type":"filter","test":"datum.a.b.current_rank > 5 && datum.a.b.current_rank < datum.b.max_rank - 5 ? datum.a.a.rank >= datum.a.b.current_rank - 2 && datum.a.a.rank <= datum.a.b.current_rank + 2  : false"},{"type":"formula","field":"color","expr":"datum.a.a.rank === datum.a.b.current_rank ? '#5BB1D2' : '#9aa2a9'"},{"type":"formula","field":"weight","expr":"datum.a.a.rank === datum.a.b.current_rank ? '500' : '300'"}]},{"name":"center_count","source":"center","transform":[{"type":"aggregate","summarize":{"*":"count"}}]},{"name":"tail","source":"table","transform":[{"type":"cross","with":"current"},{"type":"cross","with":"max"},{"type":"filter","test":"datum.a.b.current_rank >= datum.b.max_rank - 4 ? datum.a.a.rank >= datum.b.max_rank - 4 : datum.a.a.rank === datum.b.max_rank"},{"type":"formula","field":"color","expr":"datum.a.a.rank === datum.a.b.current_rank ? '#5BB1D2' : '#9aa2a9'"},{"type":"formula","field":"trick_color","expr":"datum.a.b.current_rank <= 5 || datum.a.b.current_rank >= datum.b.max_rank - 4 ? datum.color : 'transparent'"},{"type":"formula","field":"rule_trick_color","expr":"datum.a.b.current_rank <= 5 || datum.a.b.current_rank >= datum.b.max_rank - 4 ? '#9aa2a9' : 'transparent'"},{"type":"formula","field":"weight","expr":"datum.a.a.rank === datum.a.b.current_rank ? '500' : '300'"}]}],"scales":[{"name":"vertical_head","type":"ordinal","range":[0,20,40,60,80],"domain":{"data":"head","field":"a.rank","sort":{"field":"a.rank","op":"min"}}},{"name":"vertical_center","type":"ordinal","range":[0,20,40,60,80],"domain":{"data":"center","field":"a.a.rank","sort":{"field":"a.a.rank","op":"min"}}},{"name":"vertical_tail","type":"ordinal","range":[0,20,40,60,80],"domain":{"data":"tail","field":"a.a.rank","sort":{"field":"a.a.rank","op":"min"}}},{"name":"bar","type":"linear","range":"width","domain":{"data":"table","field":"value"}}],"marks":[{"type":"text","from":{"data":"head"},"properties":{"enter":{"x":{"value":20},"y":{"field":"a.rank","scale":"vertical_head"},"text":{"template":"{{datum.a.rank}}"},"baseline":{"value":"middle"},"fontSize":{"value":13},"fontWeight":{"field":"weight"},"fill":{"field":"color"},"align":{"value":"right"}}}},{"type":"text","from":{"data":"head"},"properties":{"enter":{"x":{"value":30},"y":{"field":"a.rank","scale":"vertical_head"},"text":{"template":"{{datum.a.name | truncate:10}}"},"baseline":{"value":"middle"},"fontSize":{"value":13},"fontWeight":{"field":"weight"},"fill":{"field":"color"},"align":{"value":"left"}}}},{"type":"rect","from":{"data":"head"},"properties":{"enter":{"x":{"field":{"group":"width"},"mult":0.5},"y":{"field":"a.rank","scale":"vertical_head","offset":-6},"height":{"value":12},"width":{"field":"a.value","scale":"bar","mult":0.5},"fill":{"field":"color"}}}},{"type":"group","from":{"data":"head_count"},"properties":{"enter":{"x":{"value":0},"y":{"field":"count","mult":20,"offset":10},"width":{"field":{"group":"width"}}}},"marks":[{"type":"rule","properties":{"enter":{"x":{"value":0},"x2":{"field":{"group":"width"}},"y":{"value":0,"offset":-15},"stroke":{"value":"#9aa2a9"},"strokeWidth":{"value":0.5}}}},{"type":"text","from":{"data":"center"},"properties":{"enter":{"x":{"value":20},"y":{"scale":"vertical_center","field":"a.a.rank"},"fill":{"field":"color"},"baseline":{"value":"middle"},"fontSize":{"value":13},"fontWeight":{"field":"weight"},"align":{"value":"right"},"text":{"template":"{{datum.a.a.rank}}"}}}},{"type":"text","from":{"data":"center"},"properties":{"enter":{"x":{"value":30},"y":{"scale":"vertical_center","field":"a.a.rank"},"fill":{"field":"color"},"baseline":{"value":"middle"},"fontSize":{"value":13},"fontWeight":{"field":"weight"},"align":{"value":"left"},"text":{"template":"{{datum.a.a.name | truncate:20}}"}}}},{"type":"rect","from":{"data":"center"},"properties":{"enter":{"x":{"field":{"group":"width"},"mult":0.5},"y":{"scale":"vertical_center","field":"a.a.rank","offset":-6},"height":{"value":12},"width":{"field":"a.a.value","scale":"bar","mult":0.5},"fill":{"field":"color"}}}},{"type":"group","from":{"data":"center_count"},"properties":{"enter":{"y":{"field":"count","mult":20,"offset":10},"width":{"field":{"group":"width"}}}},"marks":[{"type":"rule","properties":{"enter":{"x":{"value":0},"x2":{"field":{"group":"width"}},"y":{"value":0,"offset":-15},"stroke":{"value":"#9aa2a9"},"strokeWidth":{"value":0.5}}}},{"type":"text","from":{"data":"tail"},"properties":{"enter":{"x":{"value":20},"y":{"scale":"vertical_tail","field":"a.a.rank"},"fill":{"field":"color"},"baseline":{"value":"middle"},"fontSize":{"value":13},"fontWeight":{"field":"weight"},"align":{"value":"right"},"text":{"template":"{{datum.a.a.rank}}"}}}},{"type":"text","from":{"data":"tail"},"properties":{"enter":{"x":{"value":30},"y":{"scale":"vertical_tail","field":"a.a.rank"},"fill":{"field":"color"},"baseline":{"value":"middle"},"fontSize":{"value":13},"fontWeight":{"field":"weight"},"align":{"value":"left"},"text":{"template":"{{datum.a.a.name | truncate:20}}"}}}},{"type":"rect","from":{"data":"tail"},"properties":{"enter":{"x":{"field":{"group":"width"},"mult":0.5},"y":{"scale":"vertical_tail","field":"a.a.rank","offset":-6},"height":{"value":12},"width":{"field":"a.a.value","scale":"bar","mult":0.5},"fill":{"field":"color"}}}}]}]},{"type":"group","from":{"data":"head_count"},"properties":{"enter":{"y":{"field":"count","mult":20,"offset":10},"width":{"field":{"group":"width"}}}},"marks":[{"type":"rule","from":{"data":"tail"},"properties":{"enter":{"x":{"value":0},"x2":{"field":{"group":"width"}},"y":{"value":0,"offset":-15},"stroke":{"field":"rule_trick_color"},"strokeWidth":{"value":0.5}}}},{"type":"text","from":{"data":"tail"},"properties":{"enter":{"x":{"value":20},"y":{"scale":"vertical_tail","field":"a.a.rank"},"fill":{"field":"trick_color"},"baseline":{"value":"middle"},"fontSize":{"value":13},"fontWeight":{"field":"weight"},"align":{"value":"right"},"text":{"template":"{{datum.a.a.rank}}"}}}},{"type":"text","from":{"data":"tail"},"properties":{"enter":{"x":{"value":30},"y":{"scale":"vertical_tail","field":"a.a.rank"},"fill":{"field":"trick_color"},"baseline":{"value":"middle"},"fontSize":{"value":13},"fontWeight":{"field":"weight"},"align":{"value":"left"},"text":{"template":"{{datum.a.a.name | truncate:20}}"}}}},{"type":"rect","from":{"data":"tail"},"properties":{"enter":{"x":{"field":{"group":"width"},"mult":0.5},"y":{"scale":"vertical_tail","field":"a.a.rank","offset":-6},"height":{"value":12},"width":{"field":"a.a.value","scale":"bar","mult":0.5},"fill":{"field":"trick_color"}}}}]}]}
    },
    {
      name: 'Most and least pollutive countries in 2011',
      slug: 'most-and-least-pollutive-countries-in-2011',
      verified: true,
      date: '2016-04-01T13:23:08+00:00',
      description: 'This dataset shows the two most and the two least pollutive countries in 2011. The mean value of the pollution per country in 2011 helps to put the values into perspective.',
      source: 'CAIT',
      source_link: 'http://www.wri.org/resources/data-visualizations/cait-climate-data-explorer',
      authors: 'CAIT Climate Data Explorer. 2015. Washington, DC: World Resources Institute. Available online at: http://cait.wri.org.  Please Note: CAIT data are derived from several sources.',
      // layer:{
      //   type: 'cartodb',
      //   name: 'Most and least pollutive countries in 2011',
      //   color: '#005824',
      //   user: 'insights',
      //   sql: 'with%20val%20as%20(SELECT%20iso,%20sum(total_n2o)::numeric%20as%20n2o,%20sum(total_ch4)::numeric%20as%20ch4,%20sum(total_f_gas)::numeric%20as%20fgas,%20sum(total_ghg_lucf)::numeric%20as%20lucf%20FROM%20cait_2_0_country_ghg_emissions%20where%20year=%272011%27%20and%20iso%20is%20not%20null%20group%20by%20iso)(select%20the_geom_webmercator,%20the_geom,%20val.iso,%20(COALESCE(ch4,0)%2BCOALESCE(fgas,0)%2BCOALESCE(lucf,0)%2BCOALESCE(n2o,0))%20as%20sum_2%20from%20val%20inner%20join%20countries%20on%20val.iso=iso_a3%20order%20by%20sum_2%20desc%20limit%202)%20union%20all%20(select%20the_geom_webmercator,%20the_geom,%20val.iso,%20(COALESCE(ch4,0)%2BCOALESCE(fgas,0)%2BCOALESCE(lucf,0)%2BCOALESCE(n2o,0))%20as%20sum_2%20from%20val%20inner%20join%20countries%20on%20val.iso=iso_a3%20order%20by%20sum_2%20asc%20limit%202)',
      //   cartocss: '#cait_2_0_country_ghg_emissions{ polygon-fill: #FFEDA0; polygon-opacity: 0.8; line-color: #FFF; line-width: 0.5; line-opacity: 1;}#cait_2_0_country_ghg_emissions [ sum_2 >= 7352.0701197] { polygon-fill: #B40903;}#cait_2_0_country_ghg_emissions [ sum_2 <= -0.965698975] { polygon-fill: #055D00;}',
      //   interactivity: false,
      //   active: true,
      //   zIndex: 0
      // },
      data: [{"x":"CHN","y":11777.9492318},{"x":"USA","y":7352.0701197},{"x":"KGZ","y":-0.965698975},{"x":"BTN","y":-6.623514368}],
        chart: {"padding":{"top":40,"left":55,"bottom":30,"right":20},"data":[{"name":"table","values":[{"x":"CHN","y":11777.9492318},{"x":"USA","y":7352.0701197},{"x":"KGZ","y":60.965698975},{"x":"BTN","y":60.623514368}]},{"name":"summary","source":"table","transform":[{"type":"aggregate","summarize":{"y":["min","max"]}},{"type":"formula","field":"difference","expr":"datum.max_y-datum.min_y"},{"type":"formula","field":"min","expr":"datum.min_y === 0 ? 0 : (datum.difference > 0 ? datum.min_y - datum.difference * 0.2  : datum.min_y * 0.8)"},{"type":"formula","field":"min","expr":"datum.min < 0 ? 0 : datum.min"},{"type":"formula","field":"max","expr":"datum.max_y === 0 ? 10 : (datum.difference > 0 ? datum.max_y + datum.difference * 0.2 : datum.max_y * 1.2)"}]},{"name":"computed","source":"table","transform":[{"type":"cross","with":"summary"}]}],"scales":[{"name":"x","type":"ordinal","range":"width","points":false,"padding":2,"domain":{"data":"table","field":"x"}},{"name":"y","type":"linear","range":"height","domain":{"data":"computed","field":"a.y"},"domainMin":{"data":"computed","field":"b.min"},"domainMax":{"data":"computed","field":"b.max"},"zero":false,"nice":true},{"name":"color","type":"ordinal","domain":{"data":"table","field":"data"},"range":["#3bb2d0","#075469","#b9bfc4","#1A8CAA"]}],"axes":[{"type":"x","scale":"x","format":"f","properties":{"ticks":{"strokeWidth":{"value":0}},"majorTicks":{"strokeWidth":{"value":0}},"axis":{"strokeWidth":{"value":0}},"labels":{"fontSize":{"value":10},"fontWeight":{"value":300},"fill":{"value":"#9aa2a9"}}}},{"type":"y","scale":"y","ticks":7,"grid":true,"layer":"back","format":"f","properties":{"ticks":{},"majorTicks":{"strokeWidth":{"value":0}},"axis":{"strokeWidth":{"value":0}},"labels":{"fontSize":{"value":10},"fontWeight":{"value":300},"fill":{"value":"#9aa2a9"}}}}],"marks":[{"type":"rect","from":{"data":"table"},"properties":{"enter":{"x":{"scale":"x","field":"x","offset":-5},"width":{"scale":"x","band":true,"offset":10},"y":{"scale":"y","field":"y"},"y2":{"field":{"group":"height"}}},"update":{"fill":{"scale":"color","field":"x"}}}},{"type":"text","from":{"data":"table","transform":[{"type":"facet","groupby":["unit"]}]},"properties":{"enter":{"x":{"value":-30},"y":{"value":-15},"text":{"template":"{{datum.unit}}"},"fontSize":{"value":10},"fontWeight":{"value":500},"fill":{"value":"#9aa2a9"},"align":{"value":"left"}}}}]}
    },
    {
      name: 'Comparison of the Energy use per capital in China and U.S.A',
      slug: 'comparison-of-the-energy-use-per-capital-in-china-and-usa',
      verified: true,
      date: '2016-04-01T13:23:08+00:00',
      description: 'This dataset shows the energy use in 2011 comparing the emission of China and the U.S per capital.',
      source: 'CAIT',
      source_link: 'http://www.wri.org/resources/data-visualizations/cait-climate-data-explorer',
      authors: 'CAIT Climate Data Explorer. 2015. Washington, DC: World Resources Institute. Available online at: http://cait.wri.org.  Please Note: CAIT data are derived from several sources.',
      data: [{"energy_use_pp":0.00046551991130715,"year":1971,"country":"China"},{"energy_use_pp":0.000477663251858984,"year":1972,"country":"China"},{"energy_use_pp":0.000484249744880604,"year":1973,"country":"China"},{"energy_use_pp":0.00048661375354029,"year":1974,"country":"China"},{"energy_use_pp":0.000527973449222224,"year":1975,"country":"China"},{"energy_use_pp":0.000537580178040905,"year":1976,"country":"China"},{"energy_use_pp":0.000577656766883423,"year":1977,"country":"China"},{"energy_use_pp":0.000617523434762829,"year":1978,"country":"China"},{"energy_use_pp":0.000619451901692974,"year":1979,"country":"China"},{"energy_use_pp":0.000609782906235509,"year":1980,"country":"China"},{"energy_use_pp":0.000597516017446687,"year":1981,"country":"China"},{"energy_use_pp":0.000607133383896969,"year":1982,"country":"China"},{"energy_use_pp":0.000622256452101514,"year":1983,"country":"China"},{"energy_use_pp":0.00065135427579389,"year":1984,"country":"China"},{"energy_use_pp":0.00065807783814127,"year":1985,"country":"China"},{"energy_use_pp":0.000671453379765465,"year":1986,"country":"China"},{"energy_use_pp":0.000694691751650085,"year":1987,"country":"China"},{"energy_use_pp":0.000720541659177764,"year":1988,"country":"China"},{"energy_use_pp":0.000724370029946811,"year":1989,"country":"China"},{"energy_use_pp":0.000766982531481653,"year":1990,"country":"China"},{"energy_use_pp":0.000736842364309425,"year":1991,"country":"China"},{"energy_use_pp":0.00075262111041486,"year":1992,"country":"China"},{"energy_use_pp":0.000788122272665558,"year":1993,"country":"China"},{"energy_use_pp":0.00081617601010207,"year":1994,"country":"China"},{"energy_use_pp":0.00086687164181582,"year":1995,"country":"China"},{"energy_use_pp":0.000881687423103774,"year":1996,"country":"China"},{"energy_use_pp":0.000871938553340244,"year":1997,"country":"China"},{"energy_use_pp":0.000869544906134379,"year":1998,"country":"China"},{"energy_use_pp":0.000878637683947523,"year":1999,"country":"China"},{"energy_use_pp":0.000919778028662055,"year":2000,"country":"China"},{"energy_use_pp":0.000933126162676416,"year":2001,"country":"China"},{"energy_use_pp":0.00097924951968135,"year":2002,"country":"China"},{"energy_use_pp":0.00110800553710028,"year":2003,"country":"China"},{"energy_use_pp":0.00126524600505372,"year":2004,"country":"China"},{"energy_use_pp":0.00136200813825054,"year":2005,"country":"China"},{"energy_use_pp":0.00147895803649067,"year":2006,"country":"China"},{"energy_use_pp":0.00155142990018097,"year":2007,"country":"China"},{"energy_use_pp":0.00160103113716402,"year":2008,"country":"China"},{"energy_use_pp":0.00171727283701155,"year":2009,"country":"China"},{"energy_use_pp":0.0018813798251483,"year":2010,"country":"China"},{"energy_use_pp":0.00202936296712372,"year":2011,"country":"China"},{"energy_use_pp":0.00564173483846328,"year":1960,"country":"United States of America"},{"energy_use_pp":0.00561205274618789,"year":1961,"country":"United States of America"},{"energy_use_pp":0.00577461310832109,"year":1962,"country":"United States of America"},{"energy_use_pp":0.00598679490810708,"year":1963,"country":"United States of America"},{"energy_use_pp":0.00613696076898624,"year":1964,"country":"United States of America"},{"energy_use_pp":0.00630789749000273,"year":1965,"country":"United States of America"},{"energy_use_pp":0.00659133798331298,"year":1966,"country":"United States of America"},{"energy_use_pp":0.00680985804078264,"year":1967,"country":"United States of America"},{"energy_use_pp":0.00707347382738932,"year":1968,"country":"United States of America"},{"energy_use_pp":0.00733236640072628,"year":1969,"country":"United States of America"},{"energy_use_pp":0.00756908874334315,"year":1970,"country":"United States of America"},{"energy_use_pp":0.00764452589075464,"year":1971,"country":"United States of America"},{"energy_use_pp":0.00794100580763807,"year":1972,"country":"United States of America"},{"energy_use_pp":0.00816360379219382,"year":1973,"country":"United States of America"},{"energy_use_pp":0.00790958647956082,"year":1974,"country":"United States of America"},{"energy_use_pp":0.0076562635792437,"year":1975,"country":"United States of America"},{"energy_use_pp":0.00810056222166166,"year":1976,"country":"United States of America"},{"energy_use_pp":0.00828557089797901,"year":1977,"country":"United States of America"},{"energy_use_pp":0.00843840307747602,"year":1978,"country":"United States of America"},{"energy_use_pp":0.00832704170536091,"year":1979,"country":"United States of America"},{"energy_use_pp":0.00794225301793377,"year":1980,"country":"United States of America"},{"energy_use_pp":0.00764753805356785,"year":1981,"country":"United States of America"},{"energy_use_pp":0.00725907889874991,"year":1982,"country":"United States of America"},{"energy_use_pp":0.00719930456987408,"year":1983,"country":"United States of America"},{"energy_use_pp":0.00744320475776529,"year":1984,"country":"United States of America"},{"energy_use_pp":0.00745658696054202,"year":1985,"country":"United States of America"},{"energy_use_pp":0.00737598861880708,"year":1986,"country":"United States of America"},{"energy_use_pp":0.00762222757533359,"year":1987,"country":"United States of America"},{"energy_use_pp":0.00784996765221944,"year":1988,"country":"United States of America"},{"energy_use_pp":0.00789034233588176,"year":1989,"country":"United States of America"},{"energy_use_pp":0.00767155403949155,"year":1990,"country":"United States of America"},{"energy_use_pp":0.00763152136326443,"year":1991,"country":"United States of America"},{"energy_use_pp":0.00767739454376759,"year":1992,"country":"United States of America"},{"energy_use_pp":0.007709835525683,"year":1993,"country":"United States of America"},{"energy_use_pp":0.00775713975813869,"year":1994,"country":"United States of America"},{"energy_use_pp":0.00776336514845387,"year":1995,"country":"United States of America"},{"energy_use_pp":0.00784401462913057,"year":1996,"country":"United States of America"},{"energy_use_pp":0.00782853525858496,"year":1997,"country":"United States of America"},{"energy_use_pp":0.00780365462164768,"year":1998,"country":"United States of America"},{"energy_use_pp":0.00792324722978784,"year":1999,"country":"United States of America"},{"energy_use_pp":0.00805681975477591,"year":2000,"country":"United States of America"},{"energy_use_pp":0.00782828043145963,"year":2001,"country":"United States of America"},{"energy_use_pp":0.00784339254663273,"year":2002,"country":"United States of America"},{"energy_use_pp":0.00779417257438458,"year":2003,"country":"United States of America"},{"energy_use_pp":0.00788175353302521,"year":2004,"country":"United States of America"},{"energy_use_pp":0.00784680491670114,"year":2005,"country":"United States of America"},{"energy_use_pp":0.00769718770478088,"year":2006,"country":"United States of America"},{"energy_use_pp":0.00775820589199445,"year":2007,"country":"United States of America"},{"energy_use_pp":0.00748793030309585,"year":2008,"country":"United States of America"},{"energy_use_pp":0.00705560393448376,"year":2009,"country":"United States of America"},{"energy_use_pp":0.00716235459828859,"year":2010,"country":"United States of America"},{"energy_use_pp":0.00703234617171295,"year":2011,"country":"United States of America"}],
      chart: {"padding":{"top":25,"left":40,"bottom":40,"right":18},"data":[{"name":"table","format":{"parse":{"x":"date"}},"values":[{"y":0.00046551991130715,"x":1971,"c":"China"},{"y":0.000477663251858984,"x":1972,"c":"China"},{"y":0.000484249744880604,"x":1973,"c":"China"},{"y":0.00048661375354029,"x":1974,"c":"China"},{"y":0.000527973449222224,"x":1975,"c":"China"},{"y":0.000537580178040905,"x":1976,"c":"China"},{"y":0.000577656766883423,"x":1977,"c":"China"},{"y":0.000617523434762829,"x":1978,"c":"China"},{"y":0.000619451901692974,"x":1979,"c":"China"},{"y":0.000609782906235509,"x":1980,"c":"China"},{"y":0.000597516017446687,"x":1981,"c":"China"},{"y":0.000607133383896969,"x":1982,"c":"China"},{"y":0.000622256452101514,"x":1983,"c":"China"},{"y":0.00065135427579389,"x":1984,"c":"China"},{"y":0.00065807783814127,"x":1985,"c":"China"},{"y":0.000671453379765465,"x":1986,"c":"China"},{"y":0.000694691751650085,"x":1987,"c":"China"},{"y":0.000720541659177764,"x":1988,"c":"China"},{"y":0.000724370029946811,"x":1989,"c":"China"},{"y":0.000766982531481653,"x":1990,"c":"China"},{"y":0.000736842364309425,"x":1991,"c":"China"},{"y":0.00075262111041486,"x":1992,"c":"China"},{"y":0.000788122272665558,"x":1993,"c":"China"},{"y":0.00081617601010207,"x":1994,"c":"China"},{"y":0.00086687164181582,"x":1995,"c":"China"},{"y":0.000881687423103774,"x":1996,"c":"China"},{"y":0.000871938553340244,"x":1997,"c":"China"},{"y":0.000869544906134379,"x":1998,"c":"China"},{"y":0.000878637683947523,"x":1999,"c":"China"},{"y":0.000919778028662055,"x":2000,"c":"China"},{"y":0.000933126162676416,"x":2001,"c":"China"},{"y":0.00097924951968135,"x":2002,"c":"China"},{"y":0.00110800553710028,"x":2003,"c":"China"},{"y":0.00126524600505372,"x":2004,"c":"China"},{"y":0.00136200813825054,"x":2005,"c":"China"},{"y":0.00147895803649067,"x":2006,"c":"China"},{"y":0.00155142990018097,"x":2007,"c":"China"},{"y":0.00160103113716402,"x":2008,"c":"China"},{"y":0.00171727283701155,"x":2009,"c":"China"},{"y":0.0018813798251483,"x":2010,"c":"China"},{"y":0.00202936296712372,"x":2011,"c":"China"},{"y":0.00564173483846328,"x":1960,"c":"United States of America"},{"y":0.00561205274618789,"x":1961,"c":"United States of America"},{"y":0.00577461310832109,"x":1962,"c":"United States of America"},{"y":0.00598679490810708,"x":1963,"c":"United States of America"},{"y":0.00613696076898624,"x":1964,"c":"United States of America"},{"y":0.00630789749000273,"x":1965,"c":"United States of America"},{"y":0.00659133798331298,"x":1966,"c":"United States of America"},{"y":0.00680985804078264,"x":1967,"c":"United States of America"},{"y":0.00707347382738932,"x":1968,"c":"United States of America"},{"y":0.00733236640072628,"x":1969,"c":"United States of America"},{"y":0.00756908874334315,"x":1970,"c":"United States of America"},{"y":0.00764452589075464,"x":1971,"c":"United States of America"},{"y":0.00794100580763807,"x":1972,"c":"United States of America"},{"y":0.00816360379219382,"x":1973,"c":"United States of America"},{"y":0.00790958647956082,"x":1974,"c":"United States of America"},{"y":0.0076562635792437,"x":1975,"c":"United States of America"},{"y":0.00810056222166166,"x":1976,"c":"United States of America"},{"y":0.00828557089797901,"x":1977,"c":"United States of America"},{"y":0.00843840307747602,"x":1978,"c":"United States of America"},{"y":0.00832704170536091,"x":1979,"c":"United States of America"},{"y":0.00794225301793377,"x":1980,"c":"United States of America"},{"y":0.00764753805356785,"x":1981,"c":"United States of America"},{"y":0.00725907889874991,"x":1982,"c":"United States of America"},{"y":0.00719930456987408,"x":1983,"c":"United States of America"},{"y":0.00744320475776529,"x":1984,"c":"United States of America"},{"y":0.00745658696054202,"x":1985,"c":"United States of America"},{"y":0.00737598861880708,"x":1986,"c":"United States of America"},{"y":0.00762222757533359,"x":1987,"c":"United States of America"},{"y":0.00784996765221944,"x":1988,"c":"United States of America"},{"y":0.00789034233588176,"x":1989,"c":"United States of America"},{"y":0.00767155403949155,"x":1990,"c":"United States of America"},{"y":0.00763152136326443,"x":1991,"c":"United States of America"},{"y":0.00767739454376759,"x":1992,"c":"United States of America"},{"y":0.007709835525683,"x":1993,"c":"United States of America"},{"y":0.00775713975813869,"x":1994,"c":"United States of America"},{"y":0.00776336514845387,"x":1995,"c":"United States of America"},{"y":0.00784401462913057,"x":1996,"c":"United States of America"},{"y":0.00782853525858496,"x":1997,"c":"United States of America"},{"y":0.00780365462164768,"x":1998,"c":"United States of America"},{"y":0.00792324722978784,"x":1999,"c":"United States of America"},{"y":0.00805681975477591,"x":2000,"c":"United States of America"},{"y":0.00782828043145963,"x":2001,"c":"United States of America"},{"y":0.00784339254663273,"x":2002,"c":"United States of America"},{"y":0.00779417257438458,"x":2003,"c":"United States of America"},{"y":0.00788175353302521,"x":2004,"c":"United States of America"},{"y":0.00784680491670114,"x":2005,"c":"United States of America"},{"y":0.00769718770478088,"x":2006,"c":"United States of America"},{"y":0.00775820589199445,"x":2007,"c":"United States of America"},{"y":0.00748793030309585,"x":2008,"c":"United States of America"},{"y":0.00705560393448376,"x":2009,"c":"United States of America"},{"y":0.00716235459828859,"x":2010,"c":"United States of America"},{"y":0.00703234617171295,"x":2011,"c":"United States of America"}]},{"name":"categories","source":"table","transform":[{"type":"facet","groupby":["c"]}]}],"scales":[{"name":"x","type":"time","range":"width","zero":false,"points":true,"domain":{"data":"table","field":"x"}},{"name":"y","type":"linear","range":"height","nice":true,"domain":{"data":"table","field":"y"}},{"name":"x-label","type":"ordinal","range":"width","zero":false,"points":false,"padding":0.5,"domain":{"data":"table","field":"c"}},{"name":"color","type":"ordinal","domain":{"data":"table","field":"data"},"range":["#72B800","#F1B900","#B72A7E","#D4E329","#5BB1D2"]}],"axes":[{"name":"lbl","type":"x","scale":"x","ticks":5,"properties":{"ticks":{"strokeWidth":{"value":0}},"majorTicks":{"strokeWidth":{"value":0}},"axis":{"stroke":{"value":"#333"},"strokeWidth":{"value":0}},"labels":{"fontSize":{"value":10},"fontWeight":{"value":300},"fill":{"value":"#9aa2a9"}}}},{"type":"y","ticks":7,"scale":"y","grid":true,"layer":"back","format":"f","properties":{"ticks":{},"majorTicks":{"strokeWidth":{"value":0}},"axis":{"stroke":{"value":"#333"},"strokeWidth":{"value":0}},"labels":{"fontSize":{"value":10},"fontWeight":{"value":300},"fill":{"value":"#9aa2a9"}}}}],"marks":[{"type":"group","from":{"data":"table","transform":[{"type":"facet","groupby":["c"]}]},"marks":[{"type":"line","properties":{"enter":{"interpolate":{"value":"linear"}},"update":{"x":{"scale":"x","field":"x"},"y":{"scale":"y","field":"y"},"stroke":{"scale":"color","field":"c"},"strokeWidth":{"value":2}},"hover":{"fillOpacity":{"value":0.5}}}}]},{"type":"text","from":{"data":"table","transform":[{"type":"facet","groupby":["unit"]}]},"properties":{"enter":{"x":{"value":-30},"y":{"value":-15},"text":{"template":"{{datum.unit}}"},"fontSize":{"value":10},"fontWeight":{"value":500},"fill":{"value":"#9aa2a9"},"align":{"value":"left"}}}},{"type":"rect","from":{"data":"table","transform":[{"type":"facet","groupby":["c"]}]},"properties":{"enter":{"x":{"scale":"x-label","field":"c","offset":-40,"band":false},"width":{"value":6},"y":{"field":{"group":"height"},"mult":1.19},"y2":{"field":{"group":"height"},"mult":1.21}},"update":{"fill":{"scale":"color","field":"c"}}}},{"type":"text","from":{"data":"table","transform":[{"type":"facet","groupby":["c"]}]},"properties":{"enter":{"x":{"scale":"x-label","field":"c","offset":-30},"y":{"field":{"group":"height"},"mult":1.22},"text":{"template":"{{datum.c}}"},"fontSize":{"value":11},"fontWeight":{"value":300},"fill":{"value":"#9aa2a9"},"align":{"value":"left"}}}}]}
    },
    {
      name: 'Worldwide emission by type in 2011',
      slug: 'worldwide-emission-by-type-in-2011',
      verified: true,
      date: '2016-04-01T13:23:08+00:00',
      description: 'This dataset shows the proportion of the different types of emission for the worlwide emission in 2011.',
      source: 'CAIT',
      source_link: 'http://www.wri.org/resources/data-visualizations/cait-climate-data-explorer',
      authors: 'CAIT Climate Data Explorer. 2015. Washington, DC: World Resources Institute. Available online at: http://cait.wri.org.  Please Note: CAIT data are derived from several sources.',
      data: [{"emission_type":"Electricity","score":3160.5},{"emission_type":"Fugitive Emissions","score":45.1},{"emission_type":"Construction","score":1400.9},{"emission_type":"Transportation","score":1304.6},{"emission_type":"Other Fuel","score":751.8}],
      chart: {"name":"arc","padding":{"top":20,"left":25,"bottom":10,"right":25},"data":[{"name":"table","values": [{"category":"Electricity","value":3160.5},{"category":"Fugitive Emissions","value":45.1},{"category":"Construction","value":1400.9},{"category":"Transportation","value":1304.6},{"category":"Other Fuel","value":751.8}]},{"name":"summary","source":"table","transform":[{"type":"aggregate","summarize":{"value":"sum"}}]},{"name":"layout","source":"table","transform":[{"type":"cross","with":"summary"},{"type":"pie","field":"a.value","sort":true},{"type":"formula","field":"percentage","expr":"round(datum.a.value / datum.b.sum_value * 100) === 0 ? '<1' : round(datum.a.value / datum.b.sum_value * 100)"},{"type":"formula","field":"angle_start","expr":"2*PI-datum.layout_end"},{"type":"formula","field":"angle_end","expr":"datum.angle_start+datum.layout_end-datum.layout_start"},{"type":"formula","field":"angle_mid","expr":"2*PI-datum.layout_mid"}]},{"name":"categories","source":"table","transform":[{"type":"formula","field":"reverse_value","expr":"-1 * datum.value"}]}],"scales":[{"name":"r","type":"sqrt","domain":{"data":"table","field":"value"},"range":[0,100]},{"name":"color","type":"ordinal","domain":{"data":"categories","field":"category","sort":{"field":"reverse_value","op":"min"}},"range":["#72B800","#F1B900","#B72A7E","#D4E329","#5BB1D2"]},{"name":"vertical","type":"ordinal","range":"height","domain":{"data":"categories","field":"category","sort":{"field":"reverse_value","op":"min"}},"points":true,"padding":10}],"marks":[{"type":"arc","from":{"data":"layout"},"properties":{"enter":{"x":{"field":{"group":"width"},"mult":0.5},"y":{"field":{"group":"height"},"mult":0.5},"startAngle":{"field":"angle_start"},"endAngle":{"field":"angle_end"},"innerRadius":{"field":{"group":"height"},"mult":0.38},"outerRadius":{"field":{"group":"height"},"mult":0.47},"fill":{"scale":"color","field":"a.category"}}}},{"type":"text","from":{"data":"layout"},"properties":{"enter":{"x":{"field":{"group":"width"},"mult":0.5},"y":{"field":{"group":"height"},"mult":0.5},"radius":{"field":{"group":"height"},"mult":0.55},"theta":{"field":"angle_mid"},"fontSize":{"value":10},"fill":{"value":"#9aa2a9"},"align":{"value":"center"},"baseline":{"value":"middle"},"text":{"template":"{{datum.percentage}}%"}}}},{"type":"symbol","from":{"data":"categories"},"properties":{"enter":{"x":{"field":{"group":"width"},"mult":0.5,"offset":-45},"y":{"scale":"vertical","field":"category"}},"update":{"fill":{"field":"category","scale":"color"},"size":{"value":50}}}},{"type":"text","from":{"data":"categories"},"properties":{"enter":{"x":{"field":{"group":"width"},"mult":0.5,"offset":-37},"y":{"scale":"vertical","field":"category","offset":1}},"update":{"fontSize":{"value":10},"fill":{"value":"#9aa2a9"},"text":{"template":"{{datum.category|truncate:20}}"},"baseline":{"value":"middle"}}}}]}
    },
    {
      name: 'CO2 Emission in 2011 referenced to average CO2 Emission in the last 10 years',
      slug: 'co2-emission-in-2011-referenced-to-average-co2-emission-in-the-last-10-years',
      verified: true,
      date: '2016-04-01T13:23:08+00:00',
      description: 'This dataset shows the worldwide CO2 emission in 2011 referenced to the average CO2 emission of the last 10 years.',
      source: 'CAIT',
      source_link: 'http://www.wri.org/resources/data-visualizations/cait-climate-data-explorer',
      authors: 'CAIT Climate Data Explorer. 2015. Washington, DC: World Resources Institute. Available online at: http://cait.wri.org.  Please Note: CAIT data are derived from several sources.',
      data: [{"avg":96830,"year":"CO2 Emission 2011"},{"avg":74736,"year":"Average CO2 Emission 2001-2011"}],
      chart: {"width":300,"height":180,"padding":{"top":10,"left":10,"bottom":30,"right":15},"data":[{"name":"table","values":[{"x":"96830","y":null,"c":"cat1","unit":"co2"},{"x":"Average CO2 emission 2001-2011","y":null,"c":"cat2","unit":""},{"x":"74736","y":null,"c":"cat3","unit":""}]}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"points":true,"domain":{"data":"table","field":"x"}},{"name":"y","type":"linear","range":"height","nice":true,"domain":{"data":"table","field":"y"}}],"marks":[{"type":"text","from":{"data":"table","transform":[{"type":"filter","test":"datum.c=='cat1'"}]},"properties":{"enter":{"x":{"field":{"group":"width"},"mult":0.5},"y":{"field":{"group":"height"},"mult":0.5},"text":{"template":"{{datum.x}}"},"fontSize":{"value":50},"fontWeight":{"value":600},"fill":{"value":"#9aa2a9"},"align":{"value":"center"}}}},{"type":"text","from":{"data":"table","transform":[{"type":"filter","test":"datum.c=='cat1'"}]},"properties":{"enter":{"x":{"field":{"group":"width"},"mult":0.5},"y":{"field":{"group":"height"},"mult":0.64},"text":{"template":"{{datum.unit}}"},"fontSize":{"value":12},"fontWeight":{"value":500},"fill":{"value":"#9aa2a9"},"align":{"value":"center"}}}},{"type":"text","from":{"data":"table","transform":[{"type":"filter","test":"datum.c=='cat2'"}]},"properties":{"enter":{"x":{"field":{"group":"width"},"mult":0.5},"y":{"field":{"group":"height"},"mult":0.9},"text":{"template":"{{datum.x}}"},"fontSize":{"value":12},"fontWeight":{"value":600},"fill":{"value":"#9aa2a9"},"align":{"value":"center"}}}},{"type":"text","from":{"data":"table","transform":[{"type":"filter","test":"datum.c=='cat3'"}]},"properties":{"enter":{"x":{"field":{"group":"width"},"mult":0.5},"y":{"field":{"group":"height"},"mult":1},"text":{"template":"{{datum.x}} {{datum.unit}}"},"fontSize":{"value":15},"fontWeight":{"value":300},"fill":{"value":"#9aa2a9"},"align":{"value":"center"}}}}]}
    },
    {
      name: 'Comparison of greenhouse emission of the last 10 years between India and the avarage emission of the world\'s countries',
      slug: 'comparison-of-greenhouse-emission-of-the-last-10-years-between-india-and-the-avarage-emission',
      verified: true,
      date: '2016-04-01T13:23:08+00:00',
      description: 'This data set compares the total greenhouse gas emission of the last 10 years between India and the avarage emission of the world\'s countries.',
      source: 'CAIT',
      source_link: 'http://www.wri.org/resources/data-visualizations/cait-climate-data-explorer',
      authors: 'CAIT Climate Data Explorer. 2015. Washington, DC: World Resources Institute. Available online at: http://cait.wri.org.  Please Note: CAIT data are derived from several sources.',
      layer:{
        type: 'cartodb',
        name: 'Comparison of greenhouse emission of the last 10 years',
        color: '#005824',
        user: 'insights',
        sql: 'with mytable as (SELECT iso, sum(total_n2o) as n2o, sum(total_ch4) as ch4, sum(total_f_gas) as fgas, sum(total_ghg_lucf) as lucf FROM cait_2_0_country_ghg_emissions where year::numeric<2012 and year::numeric>2000 group by iso)select the_geom, the_geom_webmercator, mytable.iso, sum(ch4+fgas+lucf+n2o) from mytable inner join countries d on mytable.iso=iso_a3 group by iso, the_geom_webmercator, the_geom',
        cartocss: '#cait_2_0_country_ghg_emissions{ polygon-fill: #F7F7F7; polygon-opacity: 0.8; line-color: #FFF; line-width: 0.5; line-opacity: 1;}#cait_2_0_country_ghg_emissions [ sum <= 96074.46840233] { polygon-fill: #252525;}#cait_2_0_country_ghg_emissions [ sum <= 4367.120840993] { polygon-fill: #525252;}#cait_2_0_country_ghg_emissions [ sum <= 1763.872054373] { polygon-fill: #737373;}#cait_2_0_country_ghg_emissions [ sum <= 860.131788935] { polygon-fill: #969696;}#cait_2_0_country_ghg_emissions [ sum <= 443.050342771] { polygon-fill: #BDBDBD;}#cait_2_0_country_ghg_emissions [ sum <= 192.748205127] { polygon-fill: #D9D9D9;}#cait_2_0_country_ghg_emissions [ sum <= 38.175638643] { polygon-fill: #F7F7F7;}"',
        interactivity: false,
        active: true,
        zIndex: 0
      },
      data: [{"x":"MEAN","y":26642.77476742},{"x":"SUM","y":1265057.72277222}],
      chart: {"padding":{"top":40,"left":55,"bottom":30,"right":20},"data":[{"name":"table","values":[{"x":"MEAN","y":26642.77476742},{"x":"SUM","y":1265057.72277222}]},{"name":"summary","source":"table","transform":[{"type":"aggregate","summarize":{"y":["min","max"]}},{"type":"formula","field":"difference","expr":"datum.max_y-datum.min_y"},{"type":"formula","field":"min","expr":"datum.min_y === 0 ? 0 : (datum.difference > 0 ? datum.min_y - datum.difference * 0.2  : datum.min_y * 0.8)"},{"type":"formula","field":"min","expr":"datum.min < 0 ? 0 : datum.min"},{"type":"formula","field":"max","expr":"datum.max_y === 0 ? 10 : (datum.difference > 0 ? datum.max_y + datum.difference * 0.2 : datum.max_y * 1.2)"}]},{"name":"computed","source":"table","transform":[{"type":"cross","with":"summary"}]}],"scales":[{"name":"x","type":"ordinal","range":"width","points":false,"padding":2,"domain":{"data":"table","field":"x"}},{"name":"y","type":"linear","range":"height","domain":{"data":"computed","field":"a.y"},"domainMin":{"data":"computed","field":"b.min"},"domainMax":{"data":"computed","field":"b.max"},"zero":false,"nice":true},{"name":"color","type":"ordinal","domain":{"data":"table","field":"data"},"range":["#3bb2d0","#b9bfc4"]}],"axes":[{"type":"x","scale":"x","format":"f","properties":{"ticks":{"strokeWidth":{"value":0}},"majorTicks":{"strokeWidth":{"value":0}},"axis":{"strokeWidth":{"value":0}},"labels":{"fontSize":{"value":10},"fontWeight":{"value":300},"fill":{"value":"#9aa2a9"}}}},{"type":"y","scale":"y","ticks":7,"grid":true,"layer":"back","format":"f","properties":{"ticks":{},"majorTicks":{"strokeWidth":{"value":0}},"axis":{"strokeWidth":{"value":0}},"labels":{"fontSize":{"value":10},"fontWeight":{"value":300},"fill":{"value":"#9aa2a9"}}}}],"marks":[{"type":"rect","from":{"data":"table"},"properties":{"enter":{"x":{"scale":"x","field":"x","offset":-5},"width":{"scale":"x","band":true,"offset":10},"y":{"scale":"y","field":"y"},"y2":{"field":{"group":"height"}}},"update":{"fill":{"scale":"color","field":"x"}}}},{"type":"text","from":{"data":"table","transform":[{"type":"facet","groupby":["unit"]}]},"properties":{"enter":{"x":{"value":-30},"y":{"value":-15},"text":{"template":"{{datum.unit}}"},"fontSize":{"value":10},"fontWeight":{"value":500},"fill":{"value":"#9aa2a9"},"align":{"value":"left"}}}}]}
    }
  ];

  App.Collection.Widgets = App.Core.Collection.extend({

    url: App.Helpers.Globals.apiUrl+'widgets',

    model: App.Model.Widget,

    /**
     * Method to search a string in name
     * @param  {String} value
     */
    search: function(value) {
      var regex = new RegExp(value, 'i');
      return this.filter(function(m) {
        return m.attributes.name.search(regex) !== -1;
      });
    },

    fixtures: function() {
      this.reset(FIXTURES);
    }
  });

}).call(this, this.App);
